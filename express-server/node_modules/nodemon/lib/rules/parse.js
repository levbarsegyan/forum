'use strict';
var fs = require('fs');
function parse(filename, callback) {
  var rules = {
    ignore: [],
    watch: [],
  };
  fs.readFile(filename, 'utf8', function (err, content) {
    if (err) {
      return callback(err);
    }
    var json = null;
    try {
      json = JSON.parse(content);
    } catch (e) {}
    if (json !== null) {
      rules = {
        ignore: json.ignore || [],
        watch: json.watch || [],
      };
      return callback(null, rules);
    }
    return callback(null, { raw: content.split(/\n/) });
  });
}
module.exports = parse;
