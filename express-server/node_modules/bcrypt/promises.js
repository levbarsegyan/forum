'use strict';
var Promise = global.Promise;
module.exports.promise = function (fn, context, args) {
    if (!Array.isArray(args)) {
        args = Array.prototype.slice.call(args);
    }
    if (typeof fn !== 'function') {
        return Promise.reject(new Error('fn must be a function'));
    }
    return new Promise(function(resolve, reject) {
        args.push(function(err, data) {
            if (err) {
                reject(err);
            } else {
                resolve(data);
            }
        });
        fn.apply(context, args);
    });
};
module.exports.reject = function (err) {
    return Promise.reject(err);
};
module.exports.use = function(promise) {
  Promise = promise;
};
